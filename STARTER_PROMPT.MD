# Rapor Sistemi Projesi - Yeniden OluÅŸturma KÄ±lavuzu

Bu dokÃ¼man, mevcut rapor sistemini sÄ±fÄ±rdan yeniden oluÅŸturmak iÃ§in gerekli tÃ¼m teknik detaylarÄ± iÃ§erir. **NOT:** Yetkilendirme sistemi ve Ã¼rÃ¼n adÄ±na Ã¶zel raporlamalar bu dokÃ¼mana dahil deÄŸildir.

## ğŸ“‹ Proje Ã–zeti

Modern bir Next.js tabanlÄ± rapor ve analiz sistemi. E-ticaret platformundan veri Ã§ekerek, Supabase veritabanÄ±nda saklayarak ve Ã§eÅŸitli raporlar sunarak iÅŸletme analitiÄŸi saÄŸlar.

## ğŸ›  Teknoloji Stack

### Frontend & Framework
- **Next.js 14** (App Router kullanÄ±lÄ±yor)
- **React 18**
- **TypeScript 5**
- **Tailwind CSS 3.4** (Styling)
- **@tailwindcss/postcss 4.1**

### Backend & VeritabanÄ±
- **Supabase**
  - `@supabase/supabase-js ^2.45.0` (Client)
  - `@supabase/ssr ^0.6.1` (Server-Side Rendering)
  - PostgreSQL (VeritabanÄ±)
  - Auth (Kimlik DoÄŸrulama)

### KÃ¼tÃ¼phaneler
- **xlsx ^0.18.5** - Excel export iÅŸlemleri
- **date-fns ^3.6.0** - Tarih formatlama ve iÅŸlemleri
- **lucide-react ^0.536.0** - Icon sistemi

## ğŸ— Proje YapÄ±sÄ±

```
reporttosupa/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ app/                          # Next.js App Router
â”‚   â”‚   â”œâ”€â”€ layout.tsx               # Root layout
â”‚   â”‚   â”œâ”€â”€ page.tsx                 # Ana sayfa
â”‚   â”‚   â”œâ”€â”€ login/                   # Login sayfasÄ±
â”‚   â”‚   â”œâ”€â”€ dashboard/               # Dashboard raporu
â”‚   â”‚   â”œâ”€â”€ orders-list/             # SipariÅŸ listesi
â”‚   â”‚   â”œâ”€â”€ delivery-report/         # Teslimat raporu
â”‚   â”‚   â”œâ”€â”€ campus-detailed-report/  # DetaylÄ± kampÃ¼s raporu
â”‚   â”‚   â”œâ”€â”€ campus-set-sales-report/ # Set satÄ±ÅŸ raporu
â”‚   â”‚   â”œâ”€â”€ cancelled-orders/        # Ä°ptal sipariÅŸler
â”‚   â”‚   â”œâ”€â”€ urunlu-siparis-raporu/   # ÃœrÃ¼nlÃ¼ sipariÅŸ raporu
â”‚   â”‚   â”œâ”€â”€ campus-orders-report/    # KampÃ¼s sipariÅŸ sayÄ±sÄ±
â”‚   â”‚   â”œâ”€â”€ kampus-satis-analizi/    # KampÃ¼s satÄ±ÅŸ analizi
â”‚   â”‚   â”œâ”€â”€ campus-class-analysis/   # KampÃ¼s-SÄ±nÄ±f analizi
â”‚   â”‚   â”œâ”€â”€ products/                # ÃœrÃ¼n listesi
â”‚   â”‚   â”œâ”€â”€ product-variation/       # ÃœrÃ¼n varyasyon
â”‚   â”‚   â”œâ”€â”€ customer-page-analytics/ # Ãœye sayfa analizi
â”‚   â”‚   â”œâ”€â”€ no-purchase-members/     # AlÄ±ÅŸveriÅŸ yapmamÄ±ÅŸ Ã¼yeler
â”‚   â”‚   â”œâ”€â”€ purchase-members/        # AlÄ±ÅŸveriÅŸ yapmÄ±ÅŸ Ã¼yeler
â”‚   â”‚   â”œâ”€â”€ daily-report/            # GÃ¼nlÃ¼k rapor
â”‚   â”‚   â”œâ”€â”€ api/
â”‚   â”‚   â”‚   â”œâ”€â”€ auth/route.ts        # DÄ±ÅŸ API login
â”‚   â”‚   â”‚   â”œâ”€â”€ customers/route.ts   # MÃ¼ÅŸteri API
â”‚   â”‚   â”‚   â””â”€â”€ admin/               # Admin API'leri
â”‚   â”‚   â””â”€â”€ auth/
â”‚   â”‚       â””â”€â”€ callback/route.ts    # Supabase auth callback
â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”œâ”€â”€ AuthGuard.tsx            # Route koruma
â”‚   â”‚   â”œâ”€â”€ Header.tsx               # Ãœst bar
â”‚   â”‚   â”œâ”€â”€ Sidebar.tsx              # Yan menÃ¼
â”‚   â”‚   â”œâ”€â”€ LayoutWrapper.tsx        # Layout wrapper
â”‚   â”‚   â”œâ”€â”€ ReportTable.tsx          # Genel tablo
â”‚   â”‚   â”œâ”€â”€ SummaryTable.tsx         # Ã–zet tablo
â”‚   â”‚   â””â”€â”€ OrderHeatmap.tsx         # IsÄ± haritasÄ±
â”‚   â”œâ”€â”€ contexts/
â”‚   â”‚   â””â”€â”€ AuthContext.tsx          # Auth context (Supabase)
â”‚   â”œâ”€â”€ hooks/
â”‚   â”‚   â””â”€â”€ usePermissions.ts        # Yetki kontrol hooks
â”‚   â”œâ”€â”€ lib/
â”‚   â”‚   â””â”€â”€ supabase.ts             # Supabase client
â”‚   â”œâ”€â”€ types/
â”‚   â”‚   â””â”€â”€ index.ts                # TypeScript tipleri
â”‚   â”œâ”€â”€ utils/
â”‚   â”‚   â”œâ”€â”€ campus.ts               # KampÃ¼s yardÄ±mcÄ± fonksiyonlar
â”‚   â”‚   â””â”€â”€ date.ts                 # Tarih yardÄ±mcÄ± fonksiyonlar
â”‚   â””â”€â”€ plugins/
â”‚       â””â”€â”€ supabase-tab-fix.ts     # Multi-tab auth fix
â”œâ”€â”€ .env.local                       # Environment variables
â””â”€â”€ package.json
```

## ğŸ”Œ API EntegrasyonlarÄ±

### 1. DÄ±ÅŸ E-Ticaret API

**Base URL:** `process.env.BASE_URL`

#### Authentication
```typescript
// Endpoint: /api/customer/login
POST ${BASE_URL}/api/customer/login
Headers:
  - Content-Type: application/json
  - Cookie: .Application.Customer=${COOKIE_VALUE}

Body:
{
  "apiKey": string,
  "secretKey": string,
  "emailOrPhone": string,
  "password": string
}

Response:
{
  "success": boolean,
  "statusCode": number,
  "errors": any[],
  "data": {
    "version": string,
    "token": string,
    "refreshToken": string,
    "expiresIn": number
  }
}
```

#### Veri Ã‡ekme Endpointleri
- SipariÅŸ verileri API'den Ã§ekiliyor (detaylÄ± endpoint bilgisi kodda mevcut deÄŸil)
- ÃœrÃ¼n verileri API'den Ã§ekiliyor
- MÃ¼ÅŸteri verileri API'den Ã§ekiliyor

### 2. Supabase Integration

**Configuration:**
```typescript
const supabaseUrl = process.env.NEXT_PUBLIC_SUPABASE_URL
const supabaseAnonKey = process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY
const serviceRoleKey = process.env.SUPABASE_SERVICE_ROLE_KEY // Server-side only
```

#### VeritabanÄ± TablolarÄ±

##### `orders` Tablosu
```typescript
interface Order {
  id?: number
  custom_order_number: string
  customer_info: string
  order_status: string
  payment_status: string
  state_province_name: string
  items: any[]
  created_on: string
  order_subtotal_incl_tax: number
  order_subtotal_excl_tax: number
  order_sub_total_discount_incl_tax: number
  order_sub_total_discount_excl_tax: number
  order_shipping_cost: number
  order_shipping_incl_tax: number
  order_shipping_excl_tax: number
  payment_method_additional_fee_text?: string
  payment_method_additional_fee_incl_tax: number
  payment_method_additional_fee_excl_tax: number
  tax: number
  order_total_discount: number
  order_total: number
  campus?: string
  campus_id?: number | null
  class?: string
  redeemed_reward_points: number
  redeemed_reward_points_amount: number
  identity_number?: string
  payment_method?: string
  installment?: string
  delivery_date?: string | null
  total_item_discount_amount?: number
  // Adres bilgileri...
}
```

##### `products` Tablosu
```typescript
interface Product {
  id: number
  name: string
  short_description?: string
  full_description?: string
  sku?: string
  model_code?: string
  gtin?: string
  price: number
  old_price: number
  product_cost: number
  stock_quantity: number
  published: boolean
  created_on: string
  updated_on: string
  // Kategori, Ã¼retici vs. iliÅŸkiler...
}
```

##### `user_profiles` Tablosu (Yetkilendirme iÃ§in - bu kÄ±sÄ±m hariÃ§ tutulabilir)
```typescript
interface UserProfile {
  user_id: string
  campus_permissions: string[]
  report_permissions: string[]
  is_super_admin: boolean
  created_at: string
  updated_at: string
}
```

##### `campuses` Tablosu
```typescript
interface Campus {
  id: number
  name: string
  type: 'merkez' | 'franchise'
  created_at: string
}
```

## ğŸ“Š Ã–nemli Ä°ÅŸ MantÄ±ÄŸÄ±

### 1. SipariÅŸ Durumu Belirleme
```typescript
function getOrderStatus(orderStatus: string, paymentStatus: string):
  'iptal' | 'iade' | 'onay-bekliyor' | 'basarili' | 'basarisiz' {

  // Ä°ptal edilmiÅŸ ama Ã¶demesi alÄ±nmÄ±ÅŸ
  if ((orderStatus === 'Ä°ptal Edildi' || orderStatus === 'Ä°ptal TutarÄ± Bankaya Ä°letildi')
      && paymentStatus === 'Ã–deme TamamlandÄ±') {
    return 'iptal'
  }

  // Ä°ptal edilmiÅŸ ve Ã¶deme alÄ±nmamÄ±ÅŸ
  if (orderStatus === 'Ä°ptal Edildi' && paymentStatus === 'Ã–deme AlÄ±namadÄ±') {
    return 'basarisiz'
  }

  // Ä°ade edilmiÅŸ
  if (orderStatus === 'Ä°ade Edildi' && paymentStatus === 'Ã–deme TamamlandÄ±') {
    return 'iade'
  }

  // Onay bekliyor
  if (orderStatus === 'Onay Bekliyor') {
    return 'onay-bekliyor'
  }

  // BaÅŸarÄ±lÄ±
  if (paymentStatus === 'Ã–deme TamamlandÄ±') {
    return 'basarili'
  }

  return 'basarisiz'
}
```

### 2. Ciro Hesaplama
```typescript
// Net ciro = order_total - vade farkÄ±
const netAmount = order.order_total - (order.payment_method_additional_fee_incl_tax || 0)

// Ä°ndirim toplamÄ± = sipariÅŸ seviyesi + Ã¼rÃ¼n seviyesi
const totalDiscount = (order.order_sub_total_discount_incl_tax || 0) +
                     (order.total_item_discount_amount || 0)
```

### 3. KampÃ¼s Tipleri
```typescript
// Environment variables'dan:
NEXT_PUBLIC_MERKEZ_KAMPUSLER=KampÃ¼s1,KampÃ¼s2,KampÃ¼s3
NEXT_PUBLIC_FRANCHISE_KAMPUSLER=Franchise1,Franchise2

function getCampusType(campus: string): 'merkez' | 'franchise' | 'bilinmeyen' {
  if (MERKEZ_KAMPUSLER.includes(campus)) return 'merkez'
  if (FRANCHISE_KAMPUSLER.includes(campus)) return 'franchise'
  return 'bilinmeyen'
}
```

### 4. Para FormatÄ±
```typescript
function formatCurrency(amount: number): string {
  return new Intl.NumberFormat('tr-TR', {
    style: 'currency',
    currency: 'TRY',
    minimumFractionDigits: 2
  }).format(amount)
}
```

## ğŸ” Environment Variables

```bash
# Supabase Configuration
NEXT_PUBLIC_SUPABASE_URL=your_supabase_project_url
NEXT_PUBLIC_SUPABASE_ANON_KEY=your_supabase_anon_key
SUPABASE_SERVICE_ROLE_KEY=your_supabase_service_role_key

# DÄ±ÅŸ API Configuration
BASE_URL=https://yonder.okuldolabim.com/
COOKIE_VALUE=your_cookie_value
API_KEY=L_M69BXRC02A7rylNIxxKA
SECRET_KEY=r0SZUq5pO0-ehNiQxPUgCg
EMAIL=api@yonder.okuldolabim.com
PASSWORD=IdhtqmeU5h

# Sync Security Token
SYNC_TOKEN=your_secure_random_token
NEXT_PUBLIC_SYNC_TOKEN=your_secure_random_token

# Site URL
NEXT_PUBLIC_SITE_URL=https://your-domain.com

# Stock Management
CRITICAL_STOCK_THRESHOLD=50

# KampÃ¼s Listeleri
NEXT_PUBLIC_MERKEZ_KAMPUSLER=KampÃ¼s1,KampÃ¼s2,KampÃ¼s3
NEXT_PUBLIC_FRANCHISE_KAMPUSLER=Franchise1,Franchise2,Franchise3

# Development
NEXT_PUBLIC_DEV_MODE=false
```

## ğŸ“± Ana Ã–zellikler ve Sayfalar

### Dashboard (Ana Sayfa)
- **Ã–zellikler:**
  - DÃ¼n, BugÃ¼n, Bu Hafta, Bu Ay, TÃ¼m Zamanlar istatistikleri
  - Toplam ciro, sipariÅŸ sayÄ±sÄ±, ortalama sipariÅŸ deÄŸeri
  - Ä°ptal/Ä°ade tutarlarÄ±
  - Para puan kullanÄ±mÄ±
  - KampÃ¼s bazlÄ± sipariÅŸ istatistikleri (En Ã§ok/az sipariÅŸ veren kampÃ¼sler)
  - SipariÅŸ durum daÄŸÄ±lÄ±mÄ± (progress bar chart)
  - SipariÅŸ ciro Ä±sÄ± haritasÄ± (heatmap)
  - Tarih ve kampÃ¼s filtreleme

- **Veri KaynaÄŸÄ±:** `orders` tablosu
- **Hesaplamalar:**
  ```typescript
  // UTC bazlÄ± tarih aralÄ±klarÄ±
  - DÃ¼n: UTC dÃ¼n 00:00 - 23:59:59
  - BugÃ¼n: UTC bugÃ¼n 00:00 - ÅŸu an
  - Bu Hafta: Pazartesi 00:00 - ÅŸu an
  - Bu Ay: AyÄ±n 1'i 00:00 - ÅŸu an
  ```

### SipariÅŸ Listesi
- Sayfalama (50 kayÄ±t/sayfa)
- Arama (sipariÅŸ no, Ã¼ye, kampÃ¼s)
- Durum filtreleme (BaÅŸarÄ±lÄ±, Ä°ptal, Ä°ade)
- KampÃ¼s filtreleme
- Excel export (tÃ¼m filtreli veriler)

### Teslimat Raporu
- Teslim edilmiÅŸ sipariÅŸlerin detaylarÄ±
- Teslimat tarihi bazlÄ± filtreleme

### KampÃ¼s Set SatÄ±ÅŸ Raporu
- Set Ã¼rÃ¼nlerin kampÃ¼s bazlÄ± satÄ±ÅŸ analizi
- Advantage Ã¼rÃ¼n grubu Ã¶zel hesaplamalarÄ±

### KampÃ¼s DetaylÄ± Rapor
- GÃ¼nlÃ¼k tekil Ã¼rÃ¼n satÄ±ÅŸ raporu
- KampÃ¼s bazlÄ± ciro analizi

### KampÃ¼s-SÄ±nÄ±f Analiz Raporu
- KampÃ¼s ve sÄ±nÄ±f bazlÄ± sipariÅŸ daÄŸÄ±lÄ±mÄ±
- SÄ±nÄ±f seviyesi detaylÄ± analiz

### ÃœrÃ¼n RaporlarÄ±
- **ÃœrÃ¼nler:** TÃ¼m Ã¼rÃ¼n listesi, stok durumu
- **ÃœrÃ¼n Varyasyon:** ÃœrÃ¼n kombinasyonlarÄ± ve varyantlar

### Ãœye Analizleri
- **Sayfa Ziyaret Analizi:** Ãœyelerin sayfa gÃ¶rÃ¼ntÃ¼leme istatistikleri
- **AlÄ±ÅŸveriÅŸ YapmamÄ±ÅŸ Ãœyeler:** KayÄ±tlÄ± ama sipariÅŸ vermemiÅŸ Ã¼yeler
- **AlÄ±ÅŸveriÅŸ YapmÄ±ÅŸ Ãœyeler:** Aktif mÃ¼ÅŸteri analizi

## ğŸ”„ Veri Senkronizasyonu

### Otomatik Senkronizasyon
- Cron job ile dÃ¼zenli veri Ã§ekme (Ã¶nerilir)
- GitHub Actions ile otomatik sync (mevcut yapÄ±da var)

### Manuel Senkronizasyon
```typescript
// Dev mode'da dashboard'ta manuel sync butonu
POST /api/sync/orders
Headers:
  Authorization: Bearer ${SYNC_TOKEN}
```

## ğŸ“Š Excel Export Ä°ÅŸlemleri

### Genel YapÄ±
```typescript
import * as XLSX from 'xlsx'

// Veriyi hazÄ±rla
const excelData = orders.map(order => ({
  'SipariÅŸ No': order.custom_order_number,
  'KampÃ¼s': order.campus,
  'Tutar': order.order_total - order.payment_method_additional_fee_incl_tax,
  'Tarih': format(new Date(order.created_on), 'dd/MM/yyyy HH:mm')
}))

// Excel oluÅŸtur
const wb = XLSX.utils.book_new()
const ws = XLSX.utils.json_to_sheet(excelData)

// Kolon geniÅŸlikleri (opsiyonel)
ws['!cols'] = [
  { wch: 15 }, // SipariÅŸ No
  { wch: 20 }, // KampÃ¼s
  // ...
]

XLSX.utils.book_append_sheet(wb, ws, 'Sheet AdÄ±')
XLSX.writeFile(wb, 'dosya_adi.xlsx')
```

## ğŸ¨ UI/UX DetaylarÄ±

### Tailwind Renk Paleti
```css
/* BaÅŸarÄ±lÄ±: green */
bg-green-100 text-green-800
bg-green-600 hover:bg-green-700

/* Ä°ptal: red */
bg-red-100 text-red-800
bg-red-600 hover:bg-red-700

/* Ä°ade: orange */
bg-orange-100 text-orange-800
bg-orange-600 hover:bg-orange-700

/* Aktif/Primary: blue */
bg-blue-100 text-blue-700
bg-blue-600 hover:bg-blue-700

/* Neutral: gray */
bg-gray-50 text-gray-600
bg-gray-100 hover:bg-gray-200
```

### Responsive Breakpoints
```typescript
// Tailwind default breakpoints
sm: '640px'   // Mobil
md: '768px'   // Tablet
lg: '1024px'  // Laptop
xl: '1280px'  // Desktop
2xl: '1536px' // BÃ¼yÃ¼k ekran
```

### Sidebar Navigasyon YapÄ±sÄ±
```typescript
const navLinks = [
  {
    title: 'SipariÅŸ RaporlarÄ±',
    items: [
      { href: '/dashboard', label: 'Ã–zet SatÄ±ÅŸ Raporu' },
      { href: '/orders-list', label: 'SipariÅŸ Listesi' },
      // ...
    ]
  },
  {
    title: 'KampÃ¼s RaporlarÄ±',
    items: [...]
  },
  {
    title: 'ÃœrÃ¼n Analizi',
    items: [...]
  },
  {
    title: 'Ãœye Analizi',
    items: [...]
  }
]
```

## ğŸš€ Kurulum ve Ã‡alÄ±ÅŸtÄ±rma

### 1. Projeyi OluÅŸtur
```bash
npx create-next-app@14 reporttosupa --typescript --tailwind --app
cd reporttosupa
```

### 2. BaÄŸÄ±mlÄ±lÄ±klarÄ± YÃ¼kle
```bash
npm install @supabase/supabase-js@^2.45.0 @supabase/ssr@^0.6.1
npm install xlsx@^0.18.5
npm install date-fns@^3.6.0
npm install lucide-react@^0.536.0
```

### 3. Environment AyarlarÄ±
- `.env.local` dosyasÄ± oluÅŸtur
- YukarÄ±daki environment variables'larÄ± doldur

### 4. Supabase Kurulumu
```sql
-- Gerekli tablolarÄ± oluÅŸtur
CREATE TABLE orders (...);
CREATE TABLE products (...);
CREATE TABLE campuses (...);
-- Ä°ndeksler ve RLS politikalarÄ±...
```

### 5. Ã‡alÄ±ÅŸtÄ±r
```bash
npm run dev    # Development
npm run build  # Production build
npm run start  # Production server
```

## ğŸ“ˆ Performans OptimizasyonlarÄ±

### 1. Veri Ã‡ekme Stratejisi
- Chunk-based fetching (1000 kayÄ±t/chunk)
- Progressive loading (UI gÃ¼ncelleme her chunk'ta)
- Client-side filtering (bÃ¼yÃ¼k veri setleri iÃ§in)

```typescript
const fetchInChunks = async () => {
  let allData = []
  let from = 0
  const pageSize = 1000

  while (true) {
    const { data } = await supabase
      .from('orders')
      .select('*')
      .range(from, from + pageSize - 1)

    if (!data || data.length === 0) break

    allData = allData.concat(data)
    setOrders([...allData]) // UI gÃ¼ncelle

    if (data.length < pageSize) break
    from += pageSize
  }
}
```

### 2. Caching
- React hooks ile veri cache'leme
- Local storage kullanÄ±mÄ± (dikkatli)
- Supabase realtime subscriptions (gerekirse)

### 3. Multi-tab Senkronizasyonu
```typescript
// plugins/supabase-tab-fix.ts
// Storage event listener ile cross-tab auth sync
window.addEventListener('storage', (e) => {
  if (e.key?.includes('supabase.auth')) {
    // Session deÄŸiÅŸikliÄŸini algÄ±la ve sync et
  }
})
```

## ğŸ” Ã–nemli Notlar

### SipariÅŸ Durum EÅŸleÅŸtirmeleri
```typescript
const statusMapping = {
  'OnaylandÄ±': 'OnaylandÄ± (Ã–deme AlÄ±ndÄ±, SipariÅŸ OluÅŸturuldu)',
  'Ä°ptal Edildi': 'Ä°ptal Edildi (Ã–deme AlÄ±ndÄ± Ancak Veli SipariÅŸini Ä°ptal Edildi)',
  'Ä°ÅŸleme AlÄ±ndÄ±': 'Ä°ÅŸleme AlÄ±ndÄ± (SipariÅŸ Paketlenmek Ãœzere Depoya AktarÄ±ldÄ±)',
  'Netloga GÃ¶nderildi': 'Ä°ÅŸleme AlÄ±ndÄ± (SipariÅŸ Paketlenmek Ãœzere Depoya AktarÄ±ldÄ±)',
  'ToplanÄ±yor': 'Ä°ÅŸleme AlÄ±ndÄ± (SipariÅŸ Paketlenmek Ãœzere Depoya AktarÄ±ldÄ±)',
  'Paketlendi': 'Paketlendi (SipariÅŸ Depoda Paketlendi)',
  'Kargoya Verildi': 'Kargoya Verildi (SipariÅŸteki ÃœrÃ¼nler Tam Olarak Sevk Edildi)',
  'ParÃ§alÄ± Kargo Verildi': 'KÄ±smi GÃ¶nderim (Stoktaki ÃœrÃ¼nler GÃ¶nderildi...)',
  'TamamlandÄ±': 'TamamlandÄ± (SipariÅŸ Teslim Edildi)',
}
```

### Tarih ve Saat YÃ¶netimi
- **VeritabanÄ±:** UTC formatÄ±nda sakla
- **UI:** Local timezone'a Ã§evir (date-fns locale: 'tr')
- **Filtreleme:** UTC baÅŸlangÄ±Ã§/bitiÅŸ kullan

### TÃ¼rkÃ§e Karakter DesteÄŸi
```typescript
// Arama ve sÄ±ralama iÃ§in
const searchMatch = (text: string, search: string) => {
  return text.toLocaleLowerCase('tr-TR')
    .includes(search.toLocaleLowerCase('tr-TR'))
}

// SÄ±ralama
array.sort((a, b) =>
  a.name.localeCompare(b.name, 'tr-TR')
)
```

## ğŸ¯ Kritik Ä°ÅŸ KurallarÄ±

1. **Ciro Hesaplama:** `order_total - payment_method_additional_fee_incl_tax`
2. **BaÅŸarÄ±lÄ± SipariÅŸ:** `payment_status === 'Ã–deme TamamlandÄ±' && order_status !== 'Ä°ptal Edildi' && order_status !== 'Ä°ade Edildi'`
3. **Ä°ndirim:** SipariÅŸ seviyesi + ÃœrÃ¼n seviyesi indirimleri topla
4. **Hafta BaÅŸlangÄ±cÄ±:** Pazartesi (TÃ¼rkiye standardÄ±)
5. **KampÃ¼s Filtreleme:** Super admin hariÃ§, kullanÄ±cÄ±lar sadece yetkili kampÃ¼sleri gÃ¶rebilir

## ğŸ“ YardÄ±mcÄ± Linkler

- [Next.js Documentation](https://nextjs.org/docs)
- [Supabase Documentation](https://supabase.com/docs)
- [Tailwind CSS](https://tailwindcss.com/docs)
- [SheetJS (xlsx)](https://docs.sheetjs.com/)
- [date-fns](https://date-fns.org/docs)

---

## âš ï¸ HariÃ§ Tutulan Ã–zellikler

Bu prompt dokÃ¼mantasyonunda **dahil edilmemiÅŸ** Ã¶zellikler:

1. **Yetkilendirme Sistemi:**
   - KullanÄ±cÄ± yÃ¶netimi
   - Rapor bazlÄ± yetkilendirme
   - KampÃ¼s bazlÄ± yetkilendirme
   - Admin panel (/admin/permissions)
   - RLS (Row Level Security) politikalarÄ±

2. **ÃœrÃ¼n AdÄ±na Ã–zel Raporlamalar:**
   - Spesifik Ã¼rÃ¼n setleri (Advantage vs.)
   - Ã–zel Ã¼rÃ¼n kategorileri
   - ÃœrÃ¼n adÄ±na gÃ¶re Ã¶zel hesaplamalar
   - MarkalÄ±/kategorize raporlama

Bu Ã¶zellikler gerektiÄŸinde ayrÄ±ca eklenebilir veya basit versiyonlarÄ± implement edilebilir.

---

**Son GÃ¼ncelleme:** 2025-01-06
**Versiyon:** 1.0
